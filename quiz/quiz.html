<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Star Wars</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #000000 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #FFE81F;
            overflow-x: hidden;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            max-width: 1000px;
            width: 90%;
            background: rgba(0, 0, 0, 0.8);
            border: 3px solid #FFE81F;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 0 50px rgba(255, 232, 31, 0.3);
            position: relative;
            z-index: 1;
        }

        .title-screen {
            text-align: center;
        }

        h1 {
            font-size: 3.5em;
            text-shadow: 0 0 20px #FFE81F;
            margin-bottom: 20px;
            letter-spacing: 3px;
        }

        .subtitle {
            font-size: 1.5em;
            color: #4a90e2;
            margin-bottom: 40px;
        }

        .category-badge {
            display: inline-block;
            background: linear-gradient(135deg, #FFE81F, #ffd700);
            color: #000;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(255, 232, 31, 0.4);
        }

        .category-screen {
            display: none;
            text-align: center;
            animation: fadeIn 0.5s;
        }

        .question-container {
            display: none;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-number {
            color: #4a90e2;
            font-size: 1.3em;
            margin-bottom: 20px;
        }

        .question {
            font-size: 2em;
            margin-bottom: 30px;
            line-height: 1.4;
            color: #fff;
        }

        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            background: rgba(74, 144, 226, 0.2);
            border: 2px solid #4a90e2;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.3em;
            transition: all 0.3s;
            cursor: pointer;
        }

        .option:hover {
            background: rgba(74, 144, 226, 0.4);
            transform: translateX(10px);
        }

        .answer-section {
            display: none;
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid #00ff00;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            animation: fadeIn 0.5s;
        }

        .answer-label {
            color: #00ff00;
            font-size: 1.5em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .answer-text {
            font-size: 1.8em;
            color: #fff;
        }

        .video-container {
            margin-top: 20px;
            display: none;
        }

        .video-container iframe {
            width: 100%;
            max-width: 560px;
            height: 315px;
            border-radius: 10px;
            border: 2px solid #FFE81F;
        }

        .video-container img {
            width: 100%;
            max-width: 400px;
            border-radius: 10px;
            border: 2px solid #FFE81F;
        }

        .question-hint {
            margin-top: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .question-hint img {
            width: 100%;
            max-width: 400px;
            border-radius: 10px;
            border: 2px solid #FFE81F;
            animation: fadeIn 0.5s;
        }

        .question-hint a {
            display: inline-block;
            color: #FFE81F;
            background: rgba(74, 144, 226, 0.3);
            padding: 15px 30px;
            border-radius: 10px;
            text-decoration: none;
            font-size: 1.2em;
            border: 2px solid #4a90e2;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .question-hint a:hover {
            background: rgba(74, 144, 226, 0.5);
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .navigation-buttons {
            display: flex;
            gap: 20px;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .navigation-buttons button {
            min-width: 200px;
        }

        button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            background: linear-gradient(135deg, #888, #666);
        }

        button:disabled:hover {
            transform: none;
            box-shadow: 0 5px 15px rgba(255, 232, 31, 0.3);
        }

        button {
            background: linear-gradient(135deg, #FFE81F, #ffd700);
            color: #000;
            border: none;
            padding: 18px 40px;
            font-size: 1.3em;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 232, 31, 0.3);
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 232, 31, 0.5);
        }

        button:active {
            transform: scale(0.98);
        }

        .progress {
            text-align: center;
            margin-top: 30px;
            font-size: 1.2em;
            color: #4a90e2;
        }

        .bonus-screen {
            display: none;
            text-align: center;
            animation: fadeIn 0.5s;
        }

        .bonus-title {
            font-size: 3em;
            color: #FFE81F;
            text-shadow: 0 0 20px #FFE81F;
            margin-bottom: 30px;
        }

        .bonus-question {
            font-size: 2.2em;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.4;
        }

        .bonus-info {
            font-size: 1.5em;
            color: #4a90e2;
            margin-bottom: 40px;
        }

        .finish-screen {
            display: none;
            text-align: center;
            animation: fadeIn 0.5s;
        }

        .finish-title {
            font-size: 3em;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .emoji {
            font-size: 5em;
            margin: 30px 0;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2.5em; }
            .question { font-size: 1.5em; }
            .option { font-size: 1.1em; }
            .category-badge { font-size: 1.3em; }
        }
    </style>
</head>
<body>
<div class="stars" id="stars"></div>

<div class="container">
    <div class="title-screen" id="titleScreen">
        <h1>üåü QUIZ STAR WARS üåü</h1>
        <div class="subtitle">Specjalne urodzinowe wyzwanie!</div>
        <div class="emoji">üéÇüöÄ‚öîÔ∏è</div>
        <button id="startBtn">ROZPOCZNIJ QUIZ</button>
    </div>

    <div class="category-screen" id="categoryScreen">
        <h2 style="font-size: 2.5em; margin-bottom: 30px; color: #fff;">Wybierz kategoriƒô:</h2>
        <div class="category-badge" id="categoryBadge"></div>
        <div class="emoji" style="font-size: 4em; margin: 20px 0;">üéØ</div>
        <button id="startCategoryBtn">ROZPOCZNIJ KATEGORIƒò</button>
        <div id="categoryMusicPlayer"></div>
    </div>

    <div class="question-container" id="questionContainer">
        <div class="action-buttons">
            <button id="prevCategoryBtn" style="display: none;">‚¨ÖÔ∏è‚¨ÖÔ∏è POPRZEDNIA KATEGORIA</button>
        </div>

        <div class="question-number" id="questionNumber"></div>
        <div class="question" id="question"></div>
        <div class="question-hint" id="questionHint"></div>

        <div style="text-align: center; margin: 25px 0;">
            <button id="showAnswerBtn">POKA≈ª ODPOWIED≈π</button>
        </div>

        <div class="options" id="options"></div>

        <div class="answer-section" id="answerSection">
            <div class="answer-label">‚úÖ POPRAWNA ODPOWIED≈π:</div>
            <div class="answer-text" id="answerText"></div>
            <div class="video-container" id="videoContainer"></div>
        </div>

        <div class="navigation-buttons">
            <button id="prevBtn">‚¨ÖÔ∏è POPRZEDNIE</button>
            <button id="nextBtn">NASTƒòPNE ‚û°Ô∏è</button>
        </div>

        <div class="progress" id="progress"></div>
    </div>

    <div class="bonus-screen" id="bonusScreen">
        <div class="bonus-title">‚≠ê PYTANIE BONUSOWE ‚≠ê</div>
        <div class="emoji">üí∞üé¨üåü</div>
        <div class="bonus-question">Ile miliard√≥w dolar√≥w zarobi≈Çy filmy Star Wars?</div>
        <div class="bonus-info">Dru≈ºyna, kt√≥ra jest bli≈ºej prawid≈Çowego wyniku otrzyma dodatkowe <strong>5 punkt√≥w</strong></div>

        <div style="text-align: center; margin: 25px 0;">
            <button id="showBonusAnswerBtn">POKA≈ª ODPOWIED≈π</button>
        </div>

        <div class="answer-section" id="bonusAnswerSection" style="margin-top: 30px;">
            <div class="answer-label">‚úÖ POPRAWNA ODPOWIED≈π:</div>
            <div class="answer-text" style="font-size: 2.5em;">10 miliard√≥w USD</div>
        </div>

        <div style="margin-top: 40px;">
            <button id="goToFinishBtn">ZAKO≈ÉCZ QUIZ ‚û°Ô∏è</button>
        </div>
    </div>

    <div class="finish-screen" id="finishScreen">
        <div class="finish-title">üéâ GRATULACJE! üéâ</div>
        <div class="emoji">üèÜ‚≠êüéä</div>
        <h2 style="color: #fff; margin-bottom: 30px;">Uko≈Ñczy≈Çe≈õ Quiz Star Wars!</h2>
        <p style="font-size: 1.5em; color: #4a90e2; margin-bottom: 30px;">
            Niech Moc bƒôdzie z TobƒÖ!
        </p>
        <button id="restartBtn">ZAGRAJ PONOWNIE</button>
    </div>
</div>

<script>
    const questions = [
        {
            category: "ü™ê FABU≈ÅA",
            questions: [
                {
                    q: "Jakim kolorem ≈õwieci≈Ç miecz Obi-Wana w Nowej nadziei?",
                    options: ["A) Niebieski", "B) Zielony", "C) Fioletowy", "D) Czerwony"],
                    answer: "A) Niebieski",
                    videoUrl: "https://www.youtube.com/embed/Fq3nbHF8bJI?autoplay=1"
                },
                {
                    q: "Kto powiedzia≈Ç: Nie pr√≥buj. R√≥b albo nie r√≥b?",
                    options: ["A) Obi-Wan", "B) Yoda", "C) Luke", "D) Han Solo"],
                    answer: "B) Yoda",
                    videoUrl: "https://www.youtube.com/embed/xKb-zQt3COs?autoplay=1"
                },
                {
                    q: "Kto by≈Ç mistrzem Obi-Wana Kenobiego?",
                    options: ["A) Mace Windu", "B) Yoda", "C) Qui-Gon Jinn", "D) Plo Koon"],
                    answer: "C) Qui-Gon Jinn",
                    imageUrl: "https://upload.wikimedia.org/wikipedia/en/a/ad/Qui-Gon_Jinn.png"
                },
                {
                    q: "JakƒÖ nazwƒô nosi superbro≈Ñ Imperium zdolna niszczyƒá planety?",
                    options: ["A) Star Destroyer", "B) Gwiazda ≈ömierci", "C) Starkiller Base", "D) Executor"],
                    answer: "B) Gwiazda ≈ömierci"
                },
                {
                    q: "Jak nazywa siƒô statek kosmiczny Hana Solo?",
                    options: ["A) X-Wing", "B) Sok√≥≈Ç Millennium", "C) Slave I", "D) Tantive IV"],
                    answer: "B) Sok√≥≈Ç Millennium"
                }
            ]
        },
        {
            category: "üéµ MUZYKA",
            questions: [
                {
                    q: "Muzykƒô do Star Wars skomponowa≈Ç John Williams. Kt√≥ry film r√≥wnie≈º ma muzykƒô jego autorstwa?",
                    options: ["A) Titanic", "B) Harry Potter", "C) W≈Çadca Pier≈õcieni", "D) Kr√≥l Lew"],
                    answer: "B) Harry Potter",
                    videoUrl: "https://www.youtube.com/watch?v=wtHra9tFISY&list=RDwtHra9tFISY&start_radio=1&autoplay=1"
                },
                {
                    q: "Jak nazywa siƒô osoba, kt√≥ra prowadzi orkiestrƒô?",
                    options: ["A) Pianista", "B) Kompozytor", "C) Dyrygent", "D) Skrzypek"],
                    answer: "C) Dyrygent"
                },
                {
                    q: "Kt√≥ry z poni≈ºszych instrument√≥w nale≈ºy do dƒôtych?",
                    options: ["A) Gitara", "B) Bƒôben", "C) Flet", "D) Skrzypce"],
                    answer: "C) Flet"
                },
                {
                    q: "Kt√≥ry z tych instrument√≥w ma klawisze?",
                    options: ["A) Skrzypce", "B) Gitara", "C) Fortepian", "D) TrƒÖbka"],
                    answer: "C) Fortepian"
                },
                {
                    q: "Jak nazywa siƒô znak, kt√≥ry podnosi d≈∫wiƒôk o p√≥≈Ç tonu?",
                    options: ["A) Bemol", "B) Pauza", "C) Krzy≈ºyk", "D) Forte"],
                    answer: "C) Krzy≈ºyk"
                }
            ]
        },
        {
            category: "üé≠ AKTORZY",
            questions: [
                {
                    q: "Z jakiego kraju pochodzi aktorka wcielajƒÖca siƒô w rolƒô Rey?",
                    options: ["A) Wielka Brytania", "B) USA", "C) Australia", "D) Republika Po≈Çudniowej Afryki"],
                    answer: "A) Wielka Brytania",
                    hintImageUrl: "https://fwcdn.pl/nph/867323/2023/43956_1.8.jpg"
                },
                {
                    q: "Zanim Harrison Ford wcieli≈Ç siƒô w rolƒô Hana Solo, wykonywa≈Ç inny zaw√≥d. Jaki?",
                    options: ["A) Kelner", "B) Pracownik sklepu miƒôsnego", "C) Stolarz", "D) Robotnik drogowy"],
                    answer: "C) Stolarz",
                    hintImageUrl: "https://fwmedia.fandomwire.com/wp-content/uploads/2024/06/04095245/harrison-ford-star-wars.jpg"
                },
                {
                    q: "W staro≈ºytnej Grecji - kto m√≥g≈Ç wystƒôpowaƒá na scenie?",
                    options: ["A) Tylko kobiety", "B) Tylko mƒô≈ºczy≈∫ni", "C) Dzieci", "D) Wszyscy chƒôtni"],
                    answer: "B) Tylko mƒô≈ºczy≈∫ni"
                },
                {
                    q: "Jak nazywa siƒô nagroda przyznawana najlepszym aktorom i filmom w Hollywood?",
                    options: ["A) Grammy", "B) Z≈Çoty Glob", "C) Oscar", "D) Emmy"],
                    answer: "C) Oscar"
                },
                {
                    q: "Jak nazywa siƒô osoba, kt√≥ra nagrywa sw√≥j g≈Ços do postaci w filmach animowanych?",
                    options: ["A) Re≈ºyser", "B) Operator kamery", "C) Aktor dubbingowy", "D) Scenarzysta"],
                    answer: "C) Aktor dubbingowy"
                }
            ]
        },
        {
            category: "üåç MIEJSCA",
            questions: [
                {
                    q: "Gdzie nagrywano sceny na Tatooine?",
                    options: ["A) Dubaj", "B) Tunezja", "C) Egipt", "D) Meksyk"],
                    answer: "B) Tunezja"
                },
                {
                    q: "Jak nazywa siƒô jezioro, na kt√≥rym Anakin poca≈Çowa≈Ç Padm√© (we W≈Çoszech)?",
                    options: ["A) Como", "B) Garda", "C) Maggiore", "D) Trasimeno"],
                    answer: "A) Como",
                    hintLinkUrl: "https://youtu.be/yQ_PibZ1Q8M?si=ULMAIAKXKkd8AVuh"
                },
                {
                    q: "Kt√≥ra strona ≈õwiata jest naprzeciwko p√≥≈Çnocy na kompasie?",
                    options: ["A) Wsch√≥d", "B) Zach√≥d", "C) Po≈Çudnie", "D) P√≥≈Çnocny wsch√≥d"],
                    answer: "C) Po≈Çudnie"
                },
                {
                    q: "Co wyjƒÖtkowego dzieje siƒô na r√≥wniku?",
                    options: ["A) Zawsze jest zima", "B) Dni sƒÖ d≈Çu≈ºsze ni≈º noce", "C) Dzie≈Ñ i noc trwajƒÖ prawie tyle samo ca≈Çy rok", "D) S≈Ço≈Ñce nigdy nie zachodzi"],
                    answer: "C) Dzie≈Ñ i noc trwajƒÖ prawie tyle samo ca≈Çy rok"
                },
                {
                    q: "Jak nazywa siƒô najwy≈ºsza g√≥ra ≈õwiata?",
                    options: ["A) K2", "B) Kilimand≈ºaro", "C) Mont Blanc", "D) Mount Everest"],
                    answer: "D) Mount Everest",
                    hintImageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Everest_North_Face_toward_Base_Camp_Tibet_Luca_Galuzzi_2006.jpg/800px-Everest_North_Face_toward_Base_Camp_Tibet_Luca_Galuzzi_2006.jpg"
                }
            ]
        },
        {
            category: "üåê ≈öWIAT / WIEDZA OG√ìLNA",
            questions: [
                {
                    q: "Jak nazywa siƒô planeta, na kt√≥rej ≈ºyjƒÖ mali futrzani wojownicy - Ewoki?",
                    options: ["A) Tatooine", "B) Endor", "C) Jakku", "D) Dagobah"],
                    answer: "B) Endor",
                    hintImageUrl: "https://upload.wikimedia.org/wikipedia/en/e/ee/Wicket_W_Warrick.png"
                },
                {
                    q: "Jakie zwierzƒô jest symbolem Australii i potrafi skakaƒá na du≈ºe odleg≈Ço≈õci?",
                    options: ["A) Koala", "B) Kangur", "C) Dingo", "D) Emu"],
                    answer: "B) Kangur"
                },
                {
                    q: "Jak nazywa siƒô ocean, kt√≥ry le≈ºy miƒôdzy AfrykƒÖ, AzjƒÖ i AustraliƒÖ?",
                    options: ["A) Atlantycki", "B) Arktyczny", "C) Indyjski", "D) Spokojny"],
                    answer: "C) Indyjski"
                },
                {
                    q: "W jakim kraju wynaleziono pizzƒô?",
                    options: ["A) W≈Çochy", "B) Francja", "C) Grecja", "D) Hiszpania"],
                    answer: "A) W≈Çochy"
                },
                {
                    q: "W filmie Gwiezdne wojny Jedi u≈ºywajƒÖ Mocy, aby...",
                    options: ["A) Gotowaƒá jedzenie", "B) Poruszaƒá przedmiotami i wyczuwaƒá zagro≈ºenie", "C) Lataƒá na miotle", "D) Znikaƒá w dymie"],
                    answer: "B) Poruszaƒá przedmiotami i wyczuwaƒá zagro≈ºenie"
                }
            ]
        }
    ];

    let allQuestions = [];
    let currentQuestionIndex = 0;
    let currentCategoryIndex = 0;
    let currentCategoryQuestions = [];

    function createStars() {
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.width = star.style.height = Math.random() * 3 + 1 + 'px';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }
    }

    function startQuiz() {
        currentCategoryIndex = 0;
        currentQuestionIndex = 0;
        document.getElementById('titleScreen').style.display = 'none';
        showCategoryScreen();
    }

    function showCategoryScreen() {
        if (currentCategoryIndex >= questions.length) {
            showBonus();
            return;
        }

        const category = questions[currentCategoryIndex];
        document.getElementById('categoryBadge').textContent = category.category;
        document.getElementById('categoryScreen').style.display = 'block';
        document.getElementById('questionContainer').style.display = 'none';

        // Odtw√≥rz muzykƒô dla kategorii Muzyka
        const musicPlayer = document.getElementById('categoryMusicPlayer');
        if (category.category === "üéµ MUZYKA") {
            // Za≈Çaduj iframe YouTube z autoplay od razu
            musicPlayer.innerHTML = '<iframe width="560" height="315" src="https://www.youtube.com/embed/-bzWSJG93P8?autoplay=1&loop=1&playlist=-bzWSJG93P8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="margin-top: 20px; border-radius: 10px; border: 2px solid #FFE81F;"></iframe>';
        } else {
            // Wyczy≈õƒá odtwarzacz dla innych kategorii
            musicPlayer.innerHTML = '';
        }
    }

    function startCategory() {
        // Zatrzymaj muzykƒô kategorii
        const musicPlayer = document.getElementById('categoryMusicPlayer');
        musicPlayer.innerHTML = '';

        currentCategoryQuestions = questions[currentCategoryIndex].questions.map(q => ({
            category: questions[currentCategoryIndex].category,
            q: q.q,
            options: q.options,
            answer: q.answer,
            videoUrl: q.videoUrl,
            imageUrl: q.imageUrl,
            hintImageUrl: q.hintImageUrl,
            hintLinkUrl: q.hintLinkUrl
        }));

        currentQuestionIndex = 0;
        document.getElementById('categoryScreen').style.display = 'none';
        document.getElementById('questionContainer').style.display = 'block';
        showQuestion();
    }

    function showQuestion() {
        const current = currentCategoryQuestions[currentQuestionIndex];

        document.getElementById('questionNumber').textContent = 'Pytanie ' + (currentQuestionIndex + 1) + ' z ' + currentCategoryQuestions.length;
        document.getElementById('question').textContent = current.q;

        // Poka≈º obrazek-podpowied≈∫ lub link pomocniczy
        const hintContainer = document.getElementById('questionHint');
        if (current.hintImageUrl) {
            hintContainer.innerHTML = '<img src="' + current.hintImageUrl + '" alt="Podpowied≈∫">';
        } else if (current.hintLinkUrl) {
            hintContainer.innerHTML = '<a href="' + current.hintLinkUrl + '" target="_blank">üé¨ Kliknij tutaj, aby zobaczyƒá scenƒô z filmu</a>';
        } else {
            hintContainer.innerHTML = '';
        }

        const optionsContainer = document.getElementById('options');
        optionsContainer.innerHTML = '';
        current.options.forEach(option => {
            const div = document.createElement('div');
            div.className = 'option';
            div.textContent = option;
            optionsContainer.appendChild(div);
        });

        // Wyczy≈õƒá i ukryj wideo
        const videoContainer = document.getElementById('videoContainer');
        videoContainer.innerHTML = '';
        videoContainer.style.display = 'none';

        document.getElementById('answerSection').style.display = 'none';
        document.getElementById('showAnswerBtn').style.display = 'inline-block';

        // W≈ÇƒÖcz/wy≈ÇƒÖcz przycisk POPRZEDNIE
        if (currentQuestionIndex === 0) {
            document.getElementById('prevBtn').disabled = true;
        } else {
            document.getElementById('prevBtn').disabled = false;
        }

        // Poka≈º/ukryj przycisk POPRZEDNIA KATEGORIA
        if (currentCategoryIndex === 0) {
            document.getElementById('prevCategoryBtn').style.display = 'none';
        } else {
            document.getElementById('prevCategoryBtn').style.display = 'inline-block';
        }

        // Poka≈º przycisk NASTƒòPNE
        document.getElementById('nextBtn').style.display = 'inline-block';

        document.getElementById('progress').textContent = 'Postƒôp: ' + (currentQuestionIndex + 1) + '/' + currentCategoryQuestions.length;
    }

    function showAnswer() {
        const current = currentCategoryQuestions[currentQuestionIndex];
        document.getElementById('answerText').textContent = current.answer;

        // Poka≈º wideo lub obraz je≈õli pytanie ma videoUrl lub imageUrl
        const videoContainer = document.getElementById('videoContainer');
        if (current.videoUrl) {
            videoContainer.innerHTML = '';
            videoContainer.style.display = 'block';

            // Po 3 sekundach otw√≥rz film w nowej zak≈Çadce
            setTimeout(function() {
                // Je≈õli URL to format embed, zamie≈Ñ na watch
                let finalUrl = current.videoUrl;
                if (finalUrl.includes('/embed/')) {
                    finalUrl = finalUrl.replace('/embed/', '/watch?v=').replace('?autoplay=1', '');
                }

                window.open(finalUrl, '_blank');
                videoContainer.innerHTML = '<p style="color: #FFE81F; font-size: 1.3em; text-align: center;">Film otworzy≈Ç siƒô w nowej zak≈Çadce üé¨</p>';
            }, 3000);
        } else if (current.imageUrl) {
            // Najpierw poka≈º kontener bez obrazu
            videoContainer.innerHTML = '';
            videoContainer.style.display = 'block';

            // Po 3 sekundach za≈Çaduj obraz
            setTimeout(function() {
                videoContainer.innerHTML = '<img src="' + current.imageUrl + '" alt="Odpowied≈∫">';
            }, 3000);
        } else {
            videoContainer.innerHTML = '';
            videoContainer.style.display = 'none';
        }

        document.getElementById('answerSection').style.display = 'block';
        document.getElementById('showAnswerBtn').style.display = 'none';
    }

    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            showQuestion();
        }
    }

    function prevCategory() {
        if (currentCategoryIndex > 0) {
            currentCategoryIndex--;
            // Wr√≥ƒá do ostatniego pytania poprzedniej kategorii
            currentCategoryQuestions = questions[currentCategoryIndex].questions.map(q => ({
                category: questions[currentCategoryIndex].category,
                q: q.q,
                options: q.options,
                answer: q.answer,
                videoUrl: q.videoUrl,
                imageUrl: q.imageUrl,
                hintImageUrl: q.hintImageUrl,
                hintLinkUrl: q.hintLinkUrl
            }));
            currentQuestionIndex = currentCategoryQuestions.length - 1;
            showQuestion();
        }
    }

    function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < currentCategoryQuestions.length) {
            showQuestion();
        } else {
            // Przejd≈∫ do nastƒôpnej kategorii
            currentCategoryIndex++;
            showCategoryScreen();
        }
    }

    function showBonus() {
        document.getElementById('questionContainer').style.display = 'none';
        document.getElementById('categoryScreen').style.display = 'none';
        document.getElementById('bonusScreen').style.display = 'block';
        document.getElementById('bonusAnswerSection').style.display = 'none';
    }

    function showBonusAnswer() {
        document.getElementById('bonusAnswerSection').style.display = 'block';
        document.getElementById('showBonusAnswerBtn').style.display = 'none';
    }

    function goToFinish() {
        document.getElementById('bonusScreen').style.display = 'none';
        showFinish();
    }

    function showFinish() {
        document.getElementById('questionContainer').style.display = 'none';
        document.getElementById('categoryScreen').style.display = 'none';
        document.getElementById('finishScreen').style.display = 'block';
    }

    function restartQuiz() {
        currentQuestionIndex = 0;
        currentCategoryIndex = 0;
        document.getElementById('finishScreen').style.display = 'none';
        document.getElementById('titleScreen').style.display = 'block';
    }

    createStars();

    document.getElementById('startBtn').addEventListener('click', startQuiz);
    document.getElementById('startCategoryBtn').addEventListener('click', startCategory);
    document.getElementById('showAnswerBtn').addEventListener('click', showAnswer);
    document.getElementById('prevBtn').addEventListener('click', prevQuestion);
    document.getElementById('prevCategoryBtn').addEventListener('click', prevCategory);
    document.getElementById('nextBtn').addEventListener('click', nextQuestion);
    document.getElementById('showBonusAnswerBtn').addEventListener('click', showBonusAnswer);
    document.getElementById('goToFinishBtn').addEventListener('click', goToFinish);
    document.getElementById('restartBtn').addEventListener('click', restartQuiz);
</script>
</body>
</html>